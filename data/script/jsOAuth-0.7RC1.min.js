(function(b){var n="1.0";function j(p){if(window===this){return new j(p)}return this.init(p)}j.prototype={init:function(q){var p={debug:q.debug||false,consumerKey:q.consumerKey,consumerSecret:q.consumerSecret,accessTokenSecret:q.accessTokenSecret||"",signatureMethod:q.signatureMethod||"HMAC-SHA1"};this.request=function(E){var r,s,y,w,C,u,D,x,B,t,z,v,A;r=E.method||"GET";s=E.url;y=E.data||{};w=E.headers||{};C=E.success||function(F){};u=E.failure||function(){};if(p.debug){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead UniversalBrowserWrite")}D=new XMLHttpRequest();D.onreadystatechange=function(){if(D.readyState==4&&(D.status==200||D.status==0)){C(D.responseText)}else{if(D.readyState==4&&D.status!=200&&D.status!=0){u()}}};for(x in y){A.push(x+"="+y[x])}B={oauth_callback:"oob",oauth_consumer_key:p.consumerKey,oauth_token:p.accessTokenSecret,oauth_signature_method:p.signatureMethod,oauth_timestamp:d(),oauth_nonce:c(),oauth_verifier:p.verifier||"",oauth_version:n};t=p.signatureMethod;z=o(r,s,B,A);v=j.signatureMethod[t](p.consumerSecret,p.accessTokenSecret,z);B.oauth_signature=v;A=A.join("&");if(r=="GET"){if(A){s+="?"+A}A=null}else{D.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}D.open(r,s,true);D.setRequestHeader("Authorization","OAuth "+i(B));D.setRequestHeader("X-Requested-With","XMLHttpRequest");for(x in w){D.setRequestHeader(x,w[x])}D.send(A)}},authenticate:function(p){},deauthenticate:function(p){},request:"",get:function(q,r,p){this.request({url:q,success:r,failure:p})},post:function(q,r,p){this.request({method:"POST",url:q,success:r,failure:p})},getJSON:function(q,r,p){this.get(q,function(s){r(JSON.parse(s))},p)},getXML:function(q,r,p){}};j.signatureMethod={"HMAC-SHA1":function(p,r,s){var t,q;p=j.urlEncode(p);r=j.urlEncode(r||"");t=p+"&"+r;q=g(f(),t,s);return btoa(q)}};function i(r){var p=[],q;for(q in r){if(r[q]&&r[q]!=undefined&&r[q]!=""){p.push(q+'="'+j.urlEncode(r[q])+'"')}}return p.join(", ")}function o(u,r,t,q){var p=[],s;for(s in t){if(t[s]&&t[s]!=undefined){p.push(j.urlEncode(s)+"="+j.urlEncode(t[s]+""))}}for(s in q){if(q[s]&&q[s]!=undefined){if(!oauth_header_params[s]){p.push(j.urlEncode(s)+"="+j.urlEncode(q[s]+""))}}}return[u,j.urlEncode(r),j.urlEncode(p.sort().join("&"))].join("&")}function d(){return parseInt(+new Date/1000,10)}function c(u){u=u||64;var w=u/8,v="",s=w/4,r=w%4,p,t=["20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E"];for(p=0;p<s;p++){v+=t[q()]+t[q()]+t[q()]+t[q()]}for(p=0;p<r;p++){v+=t[q()]}function q(){return Math.floor(Math.random()*t.length)}return v}j.urlEncode=function(p){if(!p){return""}p=p+"";var t=/ |!|\*|"|'|\(|\)|;|:|@|&|=|\+|\$|,|\/|\?|%|#|\[|\]|<|>|{|}|\||\\|`|\^/,r=p.length,q,s=p.split("");for(q=0;q<r;q++){if(s[q].match(t)){s[q]="%"+(s[q].charCodeAt(0)).toString(16).toUpperCase()}}return s.join("")};j.urlDecode=function(p){if(!p){return""}return p.replace(/%[a-fA-F0-9]{2}/ig,function(q){return String.fromCharCode(parseInt(q.replace("%",""),16))})};function f(r){if(window===this){return new f(r)}if(arguments.length>0&&r!=undefined){var p=r,q,s;if(p.constructor===String){p=l(p)}q=new f();s=q.hash(p);return m(s)}return this}f.prototype=new f();f.prototype.blocksize=64;f.prototype.hash=function(M){var v=[1732584193,4023233417,2562383102,271733878,3285377520],u=[1518500249,1859775393,2400959708,3395469782],N,Q,P,R,S,s,p,x,O,J,I,G,F,z,y,L,q;if(M.constructor===String){M=l(M)}N=M.length;Q=(Math.ceil((N+9)/this.blocksize)*this.blocksize)-(N+9);P=[0,0,0,(N*8)];M=M.concat([128],h(Q),[0,0,0,0],P);R=Math.ceil(M.length/this.blocksize);for(S=0;S<R;S++){s=M.slice(S*this.blocksize,(S+1)*this.blocksize);p=s.length;x=[];for(O=0;O<p;O++){x[O>>>2]|=s[O]<<(24-(O-((O>>2)*4))*8)}J=v[0];I=v[1];G=v[2];F=v[3];z=v[4];for(y=0;y<80;y++){if(y>=16){x[y]=a(x[y-3]^x[y-8]^x[y-14]^x[y-16],1)}L=Math.floor(y/20);q=a(J,5)+r(L,I,G,F)+z+u[L]+x[y];z=F;F=G;G=a(I,30);I=J;J=q}v[0]+=J;v[1]+=I;v[2]+=G;v[3]+=F;v[4]+=z}function r(w,H,E,A){switch(w){case 0:return(H&E)|((~H)&A);case 1:case 3:return H^E^A;case 2:return(H&E)|(H&A)|(E&A)}return -1}return k(v)};function g(v,w,y){var s=l(w),q=l(y),r=s.length,p,t,x,u;if(r>v.blocksize){s=v.hash(s);r=s.length}s=s.concat(h(v.blocksize-r));t=s.slice(0);x=s.slice(0);for(u=0;u<v.blocksize;u++){t[u]^=92;x[u]^=54}p=v.hash(t.concat(v.hash(x.concat(q))));return e(p)}function h(p){return new Array(p+1).join(0).split("")}function l(w){var p=[],r,u,v,t,s,q;for(r=0;r<w.length;r++){u=w.charCodeAt(r);v=(u>>>24);t=(u>>>16);s=(u>>>8);q=u&255;if(v>0){p.push(v)}if(t>0){p.push(t)}if(s>0){p.push(s)}if(q>0){p.push(q)}}return p}function k(r){var p=[],q;for(q=0;q<r.length*32;q+=8){p.push((r[q>>>5]>>>(24-q%32))&255)}return p}function m(q){var s=[],p=q.length,r;for(r=0;r<p;r++){s.push((q[r]>>>4).toString(16));s.push((q[r]&15).toString(16))}return s.join("")}function e(q){var r="",p=q.length,s;for(s=0;s<p;s++){r+=String.fromCharCode(q[s])}return r}function a(q,p){return(q<<p)|(q>>>(32-p))}b.OAuth=j})(this);